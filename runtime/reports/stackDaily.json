{
  "name": "stack Monthly",
  "description": "Test report for Mysql stackexchange daily statistics. QueryFile test ",

  "require": ["query","server"],

  "datasets":[
    {
      "name" : "query",
      "show": "*",
      "type" :  "form",
      "position" : "nav",
      "columns": {
        "startDate": {
          "template" : "date",
          "required" : true
        },
        "endDate": {
          "template" : "date",
          "required" : true
        }
      }
    },

    {
      "name" : "main",
      "description" : "",
      "type" : "table",
      "source" : "StackExchange",
      "class" : "zebra",
      "queryFile" : "stackDaily.sql",
      "actions":{
        "scripts": "",
        "click": "showHiddenColumns",
        "hover": "highlight"
      },
      "show" : "*",
      "columns": {
        "rowNr": {
          "type": "rowNr",
          "offset": 1
        },
        "rank": {
          "type": "rank",
          "reference" : "posts"
        },
        "rankMin": {
          "type": "function",
          "function" : "row.getValue('rank') +3 "
        },
        "rank2": {
          "type": "function",
          "function" : "data.views - data.posts "
        },
        "rankPerc": {
          "type": "maxPercentage",
          "reference" : "rank"
        },
        "rank3": {
          "type": "hbs",
          "format": "test {{posts}} en {{d}} en {{rank}}"
        },
        "rank4": {
          "type": "format",
          "format": "test {{posts}} en {{d}} en {{rank}}"
        }

      }
      },
    {
      "name" : "total",
      "description" : "",
      "type" : "table",
      "source" : "aggregate",
      "from": "main",
      "class" : "zebra",
      "show" : "*",
      "columns": {

      }
    },
    {
      "name": "graph",
      "description": "",
      "type": "lineGraph",
      "source": "copy",
      "from": "main",
      "class": "zebra",
      "show": "*",
      "graph" : {
        "width": 500,
        "height": 200,
        "margin": 20,
        "dimensions":["posts"]
      },
      "columns": {
        "d": {
          "display": "date"
        },
        "posts": {
          "color": "blue"
        }
      }
    }

  ],

  "output": {
    "json": {
      "include": ["query","paging","main","log"],
      "type" : "json"
    },
    "html": {
      "include": ["query","main","graph","total","log"],
      "argForm": {
          "dataset": "args",
          "extension" : "html"
      },
      "template": "general",
      "type" : "hbs"
    },
    "arg": {
      "include" : ["args","query"],
      "extension" : "html",
      "type": "hbs",
      "template": "general"

    }
  }
}